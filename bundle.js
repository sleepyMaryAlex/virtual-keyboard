(()=>{"use strict";const t="en",e={en:{backquote:"`",q:"q",w:"w",e:"e",r:"r",t:"t",y:"y",u:"u",i:"i",o:"o",p:"p","[":"[","]":"]",a:"a",s:"s",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",l:"l",";":";",quotes:"'",z:"z",x:"x",c:"c",v:"v",b:"b",n:"n",m:"m",comma:",",period:".",slash:"/"},ru:{backquote:"ё",q:"й",w:"ц",e:"у",r:"к",t:"е",y:"н",u:"г",i:"ш",o:"щ",p:"з","[":"х","]":"ъ",a:"ф",s:"ы",d:"в",f:"а",g:"п",h:"р",j:"о",k:"л",l:"д",";":"ж",quotes:"э",z:"я",x:"ч",c:"с",v:"м",b:"и",n:"т",m:"ь",comma:"б",period:"ю",slash:"."}};document.querySelector("body").insertAdjacentHTML("afterbegin",'<div class="wrapper">\n                          <h1>Virtual Keyboard</h1>\n                          <textarea name="textarea" class="textarea" autofocus></textarea>\n                          <div class="keyboard">\n                              <div class="first-row">\n                                  <div class="key letter symbol" data-i18n="backquote" id=\'Backquote\'>`</div>\n                                  <div class="key digit" id="Digit1">1</div>\n                                  <div class="key digit" id="Digit2">2</div>\n                                  <div class="key digit" id="Digit3">3</div>\n                                  <div class="key digit" id="Digit4">4</div>\n                                  <div class="key digit" id="Digit5">5</div>\n                                  <div class="key digit" id="Digit6">6</div>\n                                  <div class="key digit" id="Digit7">7</div>\n                                  <div class="key digit" id="Digit8">8</div>\n                                  <div class="key digit" id="Digit9">9</div>\n                                  <div class="key digit" id="Digit0">0</div>\n                                  <div class="key symbol" id="Minus">-</div>\n                                  <div class="key symbol" id="Equal">=</div>\n                                  <div class="key control-key middle backspace" id="Backspace">backspace</div>\n                              </div>\n                              <div class="second-row">\n                                  <div class="key control-key tab" id="Tab">tab</div>\n                                  <div class="key letter" data-i18n="q" id="KeyQ">q</div>\n                                  <div class="key letter" data-i18n="w" id="KeyW">w</div>\n                                  <div class="key letter" data-i18n="e" id="KeyE">e</div>\n                                  <div class="key letter" data-i18n="r" id="KeyR">r</div>\n                                  <div class="key letter" data-i18n="t" id="KeyT">t</div>\n                                  <div class="key letter" data-i18n="y" id="KeyY">y</div>\n                                  <div class="key letter" data-i18n="u" id="KeyU">u</div>\n                                  <div class="key letter" data-i18n="i" id="KeyI">i</div>\n                                  <div class="key letter" data-i18n="o" id="KeyO">o</div>\n                                  <div class="key letter" data-i18n="p" id="KeyP">p</div>\n                                  <div class="key letter symbol" data-i18n="[" id="BracketLeft">[</div>\n                                  <div class="key letter symbol" data-i18n="]" id="BracketRight">]</div>\n                                  <div class="key symbol" id="Backslash">\\</div>\n                                  <div class="key control-key del" id="Delete">del</div>\n                              </div>\n                              <div class="third-row">\n                                  <div class="key control-key middle capslock" id="CapsLock">caps lock</div>\n                                  <div class="key letter" data-i18n="a" id="KeyA">a</div>\n                                  <div class="key letter" data-i18n="s" id="KeyS">s</div>\n                                  <div class="key letter" data-i18n="d" id="KeyD">d</div>\n                                  <div class="key letter" data-i18n="f" id="KeyF">f</div>\n                                  <div class="key letter" data-i18n="g" id="KeyG">g</div>\n                                  <div class="key letter" data-i18n="h" id="KeyH">h</div>\n                                  <div class="key letter" data-i18n="j" id="KeyJ">j</div>\n                                  <div class="key letter" data-i18n="k" id="KeyK">k</div>\n                                  <div class="key letter" data-i18n="l" id="KeyL">l</div>\n                                  <div class="key letter symbol" data-i18n=";" id="Semicolon">;</div>\n                                  <div class="key letter symbol" data-i18n="quotes" id="Quote">\'</div>\n                                  <div class="key control-key middle enter" id="Enter">enter</div>\n                              </div>\n                              <div class="fourth-row">\n                                  <div class="key control-key middle shift" id="ShiftLeft">shift</div>\n                                  <div class="key letter" data-i18n="z" id="KeyZ">z</div>\n                                  <div class="key letter" data-i18n="x" id="KeyX">x</div>\n                                  <div class="key letter" data-i18n="c" id="KeyC">c</div>\n                                  <div class="key letter" data-i18n="v" id="KeyV">v</div>\n                                  <div class="key letter" data-i18n="b" id="KeyB">b</div>\n                                  <div class="key letter" data-i18n="n" id="KeyN">n</div>\n                                  <div class="key letter" data-i18n="m" id="KeyM">m</div>\n                                  <div class="key letter symbol" data-i18n="comma" id="Comma">,</div>\n                                  <div class="key letter symbol" data-i18n="period" id="Period">.</div>\n                                  <div class="key symbol" data-i18n="slash" id="Slash">/</div>\n                                  <div class="key control-key arrow-up arrow" id="ArrowUp">▲</div>\n                                  <div class="key control-key middle shift" id="ShiftRight">shift</div>\n                              </div>\n                              <div class="fifth-row">\n                                  <div class="key control-key control-left" id="ControlLeft">ctrl</div>\n                                  <div class="key control-key" id="MetaLeft">win</div>\n                                  <div class="key control-key alt-left" id="AltLeft">alt</div>\n                                  <div class="key big" id="Space"> </div>\n                                  <div class="key control-key alt-right" id="AltRight">alt</div>\n                                  <div class="key control-key arrow" id="ArrowLeft">◄</div>\n                                  <div class="key control-key arrow" id="ArrowDown">▼</div>\n                                  <div class="key control-key arrow" id="ArrowRight">►</div>\n                                  <div class="key control-key control-right" id="ControlRight">ctrl</div>\n                              </div>\n                          </div>\n                          <div class="addition">\n                              <p>keyboard created in windows system</p>\n                              <p>for changing language: left ctrl + left alt</p>\n                          </div>\n                      </div>');const i=new class{constructor(){this.storage=localStorage,this.currentLanguage=this.getFromLocalStorage()||t}getFromLocalStorage(){return this.storage.getItem("language")}saveToLocalStorage(){this.storage.setItem("language",this.currentLanguage)}changeLanguage(){this.currentLanguage=this.currentLanguage===t?"ru":t,this.saveToLocalStorage()}},s=new class{constructor(t){this.language=t}getTranslation(t){return e[this.language.currentLanguage][t]}}(i),n=new class{constructor(){this.textareaText="",this.cursorPosition=0,this.textarea=document.querySelector(".textarea")}deleteFromTextarea(){this.cursorPosition>0&&(this.textareaText=this.textareaText.substring(0,this.textarea.selectionStart-1)+this.textareaText.substring(this.textarea.selectionEnd),this.cursorPosition-=1)}deleteFromTextareaByDel(){this.textareaText=this.textareaText.substring(0,this.textarea.selectionStart)+this.textareaText.substring(this.textarea.selectionEnd+1)}enterText(t){this.textareaText=this.textareaText.substring(0,this.cursorPosition)+t+this.textareaText.substring(this.cursorPosition),this.cursorPosition+=t.length}updateTextarea(){this.textarea.textContent=this.textareaText,this.textarea.selectionStart=this.cursorPosition,this.textarea.focus()}},a=new class{constructor(t,e,i){this.language=t,this.translationService=e,this.textarea=i,this.isCapsLocked=!1,this.isShift=!1,this.data=document.querySelectorAll("[data-i18n]"),this.keyboard=document.querySelector(".keyboard"),this.letters=document.querySelectorAll(".letter"),this.digits=document.querySelectorAll(".digit"),this.symbols=document.querySelectorAll(".symbol"),this.shifts=document.querySelectorAll(".shift"),this.controlLeft=document.querySelector("#ControlLeft"),this.altLeft=document.querySelector("#AltLeft"),this.controlRight=document.querySelector("#ControlRight"),this.altRight=document.querySelector("#AltRight")}updateTranslation(){this.data.forEach((t=>{const e=t,i=this.translationService.getTranslation(e.dataset.i18n);e.textContent=this.isCapsLocked?i.toUpperCase():i.toLowerCase()}))}shiftSymbols(){const[t,e,i,s,n,a,o,d,r,c]=this.digits,[l,v,y,h,x,k,u,g,C,L,m]=this.symbols;"en"===this.language.currentLanguage?(t.textContent="!",e.textContent="@",i.textContent="#",s.textContent="$",n.textContent="%",a.textContent="^",o.textContent="&",d.textContent="*",r.textContent="(",c.textContent=")",l.textContent="~",v.textContent="_",y.textContent="+",h.textContent="{",x.textContent="}",k.textContent="|",u.textContent=":",g.textContent='"',C.textContent="<",L.textContent=">",m.textContent="?"):"ru"===this.language.currentLanguage&&(t.textContent="!",e.textContent='"',i.textContent="№",s.textContent=";",n.textContent="%",a.textContent=":",o.textContent="?",d.textContent="*",r.textContent="(",c.textContent=")",v.textContent="_",y.textContent="+",k.textContent="/",m.textContent=",")}unshiftSymbols(){const[t,e,i,s,n,a,o,d,r,c]=this.digits,[l,v,y,h,x,k,u,g,C,L,m]=this.symbols;t.textContent="1",e.textContent="2",i.textContent="3",s.textContent="4",n.textContent="5",a.textContent="6",o.textContent="7",d.textContent="8",r.textContent="9",c.textContent="0",v.textContent="-",y.textContent="=","en"===this.language.currentLanguage?(l.textContent="`",h.textContent="[",x.textContent="]",k.textContent="\\",u.textContent=";",g.textContent="'",C.textContent=",",L.textContent=".",m.textContent="/"):"ru"===this.language.currentLanguage&&(k.textContent="\\",m.textContent=".")}shiftLetters(){this.letters.forEach((t=>{const e=t;e.textContent=this.isCapsLocked?e.textContent.toLowerCase():e.textContent.toUpperCase()}))}toUpperAndLowerCase(t){this.isCapsLocked?(t.classList.remove("capslock-active"),t.classList.remove("active"),t.classList.remove("active-background"),this.letters.forEach((t=>{const e=t;e.textContent=e.textContent.toLowerCase()})),this.isCapsLocked=!1):(this.letters.forEach((t=>{const e=t;e.textContent=e.textContent.toUpperCase()})),t.classList.add("capslock-active"),t.classList.add("active"),t.classList.add("active-background"),this.isCapsLocked=!0),this.isCapsLocked&&this.isShift||!this.isCapsLocked&&!this.isShift?this.letters.forEach((t=>{const e=t;e.textContent=e.textContent.toLowerCase()})):this.letters.forEach((t=>{const e=t;e.textContent=e.textContent.toUpperCase()}))}determinePressedKey(t){t.classList.contains("key")&&!t.classList.contains("control-key")&&this.textarea.enterText(t.textContent),t.classList.contains("arrow")&&this.textarea.enterText(t.textContent),t.classList.contains("capslock")&&this.toUpperAndLowerCase(t),t.classList.contains("enter")&&this.textarea.enterText("\n"),t.classList.contains("tab")&&this.textarea.enterText("\t"),t.classList.contains("backspace")&&this.textarea.deleteFromTextarea(),t.classList.contains("del")&&this.textarea.deleteFromTextareaByDel(),t.classList.contains("alt-left")&&this.controlLeft.classList.contains("active")&&this.changeLanguage(),t.classList.contains("control-left")&&this.altLeft.classList.contains("active")&&this.changeLanguage(),this.textarea.updateTextarea()}changeLanguage(){this.language.changeLanguage(),this.updateTranslation()}pressKey(t){const e=document.querySelector(`#${t.code}`);e&&(e.classList.contains("key")&&t.preventDefault(),e.classList.contains("control-key")&&e.classList.add("active-background"),e.classList.add("active"),e.classList.contains("shift")&&(this.shiftSymbols(),this.shiftLetters(),this.isShift=!0),this.determinePressedKey(e))}determineUpKey(t){t.classList.contains("shift")&&(this.isCapsLocked?this.letters.forEach((t=>{const e=t;e.textContent=e.textContent.toUpperCase()})):this.letters.forEach((t=>{const e=t;e.textContent=e.textContent.toLowerCase()})),this.unshiftSymbols(),this.isShift=!1)}releaseKey(t){const e=document.querySelector(`#${t.code}`);e&&(e.classList.contains("control-key")&&!e.classList.contains("capslock")&&e.classList.remove("active-background"),e.classList.contains("capslock")||e.classList.remove("active"),this.determineUpKey(e))}identifyKey(t){const e=t.target;this.determinePressedKey(e)}}(i,s,n);n.textarea.addEventListener("click",(()=>{n.cursorPosition=n.textarea.selectionStart})),document.addEventListener("keydown",(t=>{a.pressKey(t)})),document.addEventListener("keyup",(t=>{a.releaseKey(t)})),a.shifts.forEach((t=>t.addEventListener("mousedown",(()=>{a.shiftSymbols(),a.shiftLetters()})))),a.shifts.forEach((t=>t.addEventListener("mouseup",(t=>{const e=t.target;a.determineUpKey(e)})))),a.keyboard.addEventListener("click",(t=>{a.identifyKey(t)})),a.updateTranslation()})();